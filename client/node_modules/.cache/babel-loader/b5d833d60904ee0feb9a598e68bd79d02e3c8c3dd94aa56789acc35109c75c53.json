{"ast":null,"code":"import { API_URL } from \"../config\";\n\n// selectors\nexport const getAllPoints = state => state.points;\n\n// actions\nconst createActionName = actionName => `app/points/${actionName}`;\nconst UPDATE_POINTS = createActionName('UPDATE_POINTS');\nconst CHANGE_POINTS = createActionName('CHANGE_POINTS');\n\n// action creators\nexport const updatePoints = payload => ({\n  type: UPDATE_POINTS,\n  payload\n});\nexport const changeTable = payload => ({\n  type: CHANGE_POINTS,\n  payload\n});\n\n// server requests\nexport const fetchPoints = () => {\n  return dispatch => {\n    fetch(`${API_URL}/points/1`).then(res => res.json()).then(points => dispatch(updatePoints(points.value)));\n  };\n};\nexport const changePointsRequest = newPoints => {\n  return dispatch => {\n    const options = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newPoints)\n    };\n    fetch(`${API_URL}/points/${newPoints.id}`, options).then(response => {\n      if (response.ok) {\n        console.log('Points changed successfully');\n      } else {\n        console.log('Failed to change points');\n      }\n    }).then(() => dispatch(updatePoints(newPoints))).then(() => dispatch(fetchPoints())).catch(error => {\n      console.log('Error occured while changing Points', error);\n    });\n  };\n};\n\n// subreducer\nconst pointsReducer = function () {\n  let statePart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case UPDATE_POINTS:\n      return action.payload;\n    case CHANGE_POINTS:\n      return statePart.map(point => {\n        if (point.id === action.payload.id) {\n          return {\n            ...point,\n            ...action.payload\n          };\n        }\n        return point;\n      });\n    default:\n      return statePart;\n  }\n  ;\n};\nexport default pointsReducer;","map":{"version":3,"names":["API_URL","getAllPoints","state","points","createActionName","actionName","UPDATE_POINTS","CHANGE_POINTS","updatePoints","payload","type","changeTable","fetchPoints","dispatch","fetch","then","res","json","value","changePointsRequest","newPoints","options","method","headers","body","JSON","stringify","id","response","ok","console","log","catch","error","pointsReducer","statePart","arguments","length","undefined","action","map","point"],"sources":["/home/jerzy/Documents/david/react-rewards-app/src/redux/pointsRedux.js"],"sourcesContent":["import { API_URL } from \"../config\";\n\n// selectors\nexport const getAllPoints = state => state.points;\n\n// actions\nconst createActionName = actionName => `app/points/${actionName}`;\nconst UPDATE_POINTS = createActionName('UPDATE_POINTS');\nconst CHANGE_POINTS = createActionName('CHANGE_POINTS');\n\n// action creators\nexport const updatePoints = payload => ({ type: UPDATE_POINTS, payload });\nexport const changeTable = payload => ({ type: CHANGE_POINTS, payload });\n\n// server requests\nexport const fetchPoints = () => {\n  return (dispatch) => {\n    fetch(`${API_URL}/points/1`)\n      .then(res => res.json())\n      .then(points => dispatch(updatePoints(points.value)));\n  };\n};\nexport const changePointsRequest = (newPoints) => {\n  return (dispatch) => {\n    const options = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newPoints),\n    };\n\n    fetch(`${API_URL}/points/${newPoints.id}`, options)\n      .then(response => {\n        if (response.ok) {\n          console.log('Points changed successfully');\n        } else {\n          console.log('Failed to change points');\n        }\n      })\n      .then(() => dispatch(updatePoints(newPoints)))\n      .then(() => dispatch(fetchPoints()))\n      .catch(error => {\n        console.log('Error occured while changing Points', error);\n      });\n  }\n};\n\n// subreducer\nconst pointsReducer = (statePart = [], action) => {\n  switch (action.type) {\n    case UPDATE_POINTS:\n      return action.payload;\n    case CHANGE_POINTS:\n      return statePart.map(point => {\n        if (point.id === action.payload.id) {\n          return { ...point, ...action.payload };\n        }\n        return point;\n      });\n    default:\n      return statePart;\n  };\n};\n\nexport default pointsReducer;"],"mappings":"AAAA,SAASA,OAAO,QAAQ,WAAW;;AAEnC;AACA,OAAO,MAAMC,YAAY,GAAGC,KAAK,IAAIA,KAAK,CAACC,MAAM;;AAEjD;AACA,MAAMC,gBAAgB,GAAGC,UAAU,IAAK,cAAaA,UAAW,EAAC;AACjE,MAAMC,aAAa,GAAGF,gBAAgB,CAAC,eAAe,CAAC;AACvD,MAAMG,aAAa,GAAGH,gBAAgB,CAAC,eAAe,CAAC;;AAEvD;AACA,OAAO,MAAMI,YAAY,GAAGC,OAAO,KAAK;EAAEC,IAAI,EAAEJ,aAAa;EAAEG;AAAQ,CAAC,CAAC;AACzE,OAAO,MAAME,WAAW,GAAGF,OAAO,KAAK;EAAEC,IAAI,EAAEH,aAAa;EAAEE;AAAQ,CAAC,CAAC;;AAExE;AACA,OAAO,MAAMG,WAAW,GAAGA,CAAA,KAAM;EAC/B,OAAQC,QAAQ,IAAK;IACnBC,KAAK,CAAE,GAAEd,OAAQ,WAAU,CAAC,CACzBe,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACZ,MAAM,IAAIU,QAAQ,CAACL,YAAY,CAACL,MAAM,CAACe,KAAK,CAAC,CAAC,CAAC;EACzD,CAAC;AACH,CAAC;AACD,OAAO,MAAMC,mBAAmB,GAAIC,SAAS,IAAK;EAChD,OAAQP,QAAQ,IAAK;IACnB,MAAMQ,OAAO,GAAG;MACdC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,SAAS;IAChC,CAAC;IAEDN,KAAK,CAAE,GAAEd,OAAQ,WAAUoB,SAAS,CAACO,EAAG,EAAC,EAAEN,OAAO,CAAC,CAChDN,IAAI,CAACa,QAAQ,IAAI;MAChB,IAAIA,QAAQ,CAACC,EAAE,EAAE;QACfC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC5C,CAAC,MAAM;QACLD,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;MACxC;IACF,CAAC,CAAC,CACDhB,IAAI,CAAC,MAAMF,QAAQ,CAACL,YAAY,CAACY,SAAS,CAAC,CAAC,CAAC,CAC7CL,IAAI,CAAC,MAAMF,QAAQ,CAACD,WAAW,CAAC,CAAC,CAAC,CAAC,CACnCoB,KAAK,CAACC,KAAK,IAAI;MACdH,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEE,KAAK,CAAC;IAC3D,CAAC,CAAC;EACN,CAAC;AACH,CAAC;;AAED;AACA,MAAMC,aAAa,GAAG,SAAAA,CAAA,EAA4B;EAAA,IAA3BC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAAA,IAAEG,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC3C,QAAQC,MAAM,CAAC7B,IAAI;IACjB,KAAKJ,aAAa;MAChB,OAAOiC,MAAM,CAAC9B,OAAO;IACvB,KAAKF,aAAa;MAChB,OAAO4B,SAAS,CAACK,GAAG,CAACC,KAAK,IAAI;QAC5B,IAAIA,KAAK,CAACd,EAAE,KAAKY,MAAM,CAAC9B,OAAO,CAACkB,EAAE,EAAE;UAClC,OAAO;YAAE,GAAGc,KAAK;YAAE,GAAGF,MAAM,CAAC9B;UAAQ,CAAC;QACxC;QACA,OAAOgC,KAAK;MACd,CAAC,CAAC;IACJ;MACE,OAAON,SAAS;EACpB;EAAC;AACH,CAAC;AAED,eAAeD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}